{{/*
ConfigMap for HAProxy init container script
This creates a script that waits for PMM instances to be ready
*/}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "pmm.fullname" . }}-haproxy-init-script
  labels:
    {{- include "pmm.labels" . | nindent 4 }}
    app.kubernetes.io/component: haproxy-init
data:
  wait-for-pmm.sh: |
    {{- include "haproxy.initContainerScript" . | nindent 4 }}
